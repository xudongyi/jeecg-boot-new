<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.jeecg.modules.business.mapper.CompanyMapper">
    <select id="queryCompanyInfos"  resultType="Map">
            select M.*,N.site_name,N.site_type,N.site_level,N.location,N.imorex,N.direction,data_status,
        device_status,online_status from (
                select company_id,company_name,short_name,longitude,dimension,address,industry,env_protect_contact,
                       contact_phone from company_base A inner join company_baseinfo B
                                                                    on A.id = B.company_id AND B.status ='2'
                                                                    where A.id in
    <foreach collection="companyIds" item="id" index="index" open="(" close=")" separator=",">
        #{id}
    </foreach>)  M
                INNER JOIN site_monitor_point N
                           ON M.company_id = N.company_id  ORDER BY company_id

    </select>
</mapper>
